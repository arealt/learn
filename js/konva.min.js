/*
 * Konva JavaScript Framework v2.4.2
 * http://konvajs.github.io/
 * Licensed under the MIT
 * Date: Fri Oct 12 2018
 *
 * Original work Copyright (C) 2011 - 2013 by Eric Rowell (KineticJS)
 * Modified work Copyright (C) 2014 - present by Anton Lavrenov (Konva)
 *
 * @license
 */
    var clientHeight=window.innerHeight;
    var list=document.getElementsByClassName("list")[0];
    var main=document.getElementById("main");
    list.style.height=(clientHeight-60)+"px";
    main.style.height=(clientHeight-60)+"px";
    for(var title in data){
        var li=document.createElement("li");
        li.innerHTML=title;
        li.setAttribute('data-title',title);
        list.appendChild(li);
    }
    var lis=document.querySelectorAll(".list li");
    var content=document.querySelector("#content");
    for(var i=0;i<lis.length;i++){
        lis[i].addEventListener('click',function(){
            var title=this.dataset["title"];
            //console.log(content);
            content.innerHTML=data[title];
            if(window.history&&history.pushState){
                history.pushState(title,"此浏览器不支持","?t="+title);  //把title给state  后面通过e.state访问
            }else{
                console.log("浏览器不支持history.pushState");
            }
        })
    }
    // 当我们在伪造的访问历史中前进或后退时会执行一个popstate事件
    window.addEventListener('popstate',function(e){
        content.innerHTML=data[e.state];
    })
    var search=window.location.search;
    var title=search.split("=")[1];
    if(title){
        console.log(decodeURI(title));
        content.innerHTML=data[decodeURI(title)];
    }
