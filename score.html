<!DOCTYPE html>

<html>
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>18秋平面设计班</title>
    <meta name="keywords" content="18秋平面设计班" />
    <meta name="description" content="18秋平面设计班是个优秀的班级" />
    <meta content="always" name="referrer">
    <link rel="shortcut icon" href="favicon.ico" />
    <link rel="stylesheet" href="css/basic.css" type="text/css" />
    <link rel="stylesheet" href="css/main.css" type="text/css" />
    <style>
        .content{
            display: flex;
        }
        .content>tr{
            flex:10;
            display: flex;

        }
        .td{
            border:1px green solid;
        }
        .firstTd{
            border:1px green solid;
            text-indent:2em;
        }
        select{
            width:210px;;
           font-size: 30px;
        }
    </style>
</head>
<body>
<header class="clearfix">
    <div class="header-top w"><img src="https://s2.ax1x.com/2019/01/10/FOqFFf.png" /></div>
    <div class="header-main w">
        <div id="logo"><img id="log" src="https://s2.ax1x.com/2019/01/10/FOqVSg.png" style="height:60px;" /></div>
        <div class="main-nav">
            <ul>
                <li class="first"><a href="index.html">&nbsp首页</a></li>
                <li class="activi">
                    <span>活动</span>
                    <a class="top n1" href="classmeeting.html">主题班会</a>
                    <a class="top n2" href="training.html">入校军训</a>
                    <a class="top n3" href="sing.html">班班唱</a>
                </li>
                <li><a href="works.html">作品</a>
                </li>
                <li ><a href="cadre.html">班干部</a></li>
                <li class="flex20"><a href="score.html">学习成绩</a></li>
            </ul>
        </div>
        <div class="lean fr"><img src="https://s2.ax1x.com/2019/01/10/FOqAfS.png" style="height:40px;" /></div>
    </div>
</header>
<section class="w main">
    <select name="sele" id="sele">
        <option selected value="0">选择查看成绩:</option>
        <option value="1">期中成绩</option>
        <option value="2">期末成绩</option>
    </select>
    <h1 style="text-align: center;" id="h1"></h1>
    <table id="content"></table>
</section>
<script>
    window.onload=function(){
        var sele = document.getElementById("sele");
//        var scr = document.getElementById("scr");
        var content = document.getElementById("content");
        var h1 = document.getElementById("h1");
        sele.addEventListener("change", function () {
            var len=content.rows.length;
            for(var i=0;i<len;i++){
                content.deleteRow(i);
                len=len-1;
                i=i-1;
            }
            var scr=document.createElement('script');
            if (sele.value == 1) {
                scr.src = "js/score1.js";
                h1.innerHTML = "第一学年上学期期中成绩";
            } else if (sele.value == 2) {
                scr.src = "js/score2.js";
                h1.innerHTML = "第一学年上学期期末成绩";
            }else{
                h1.innerHTML = "";
            }
            document.body.appendChild(scr);

            scr.onload=function(){
                showTable();
                document.body.removeChild(scr);
            }
        });
    }

function showTable() {

        for (var prop in score) {
            var arr1 = score[prop].split("-");
            var tr = document.createElement('tr');
            var count = 0;
            var len=arr1.length-1;
            for (var i = 0; i < len+1; i++) {
                var td = document.createElement('td');
                td.innerText = arr1[i];
                td.className = "td";
                if (i > 0) {
                    count += parseInt(arr1[i]);
                    td.style.textAlign = "center";
                } else {
                    td.className = "firstTd";
                }
                tr.appendChild(td);
            }
            var td1 = document.createElement('td');
            td1.innerText = (count /len ).toFixed(1);
            if (!count) {
                td1.innerText = "平均分";
            }
            td1.className = "td";
            tr.appendChild(td1);
            content.appendChild(tr);
        }
    }

</script>

</body>
</html>